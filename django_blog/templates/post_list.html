{% extends 'blog/base.html' %}

{% block content %}
  <h1>All Blog Posts</h1>

  {% for post in posts %}
    <article class="post">
      <h2>
        <a href="{% url 'post-detail' post.pk %}">
          {{ post.title }}
        </a>
      </h2>
      <p>
        {{ post.content|truncatewords:30 }}
      </p>
      <p>
        <small>By {{ post.author }} on {{ post.created_at|date:"F d, Y" }}</small>
      </p>
      {% if user.is_authenticated and user == post.author %}
        <p>
          <a href="{% url 'post-update' post.pk %}">Edit</a> |
          <a href="{% url 'post-delete' post.pk %}">Delete</a>
        </p>
      {% endif %}
      <hr>
    </article>
  {% empty %}
    <p>No posts have been published yet.</p>
  {% endfor %}
{% endblock %}
